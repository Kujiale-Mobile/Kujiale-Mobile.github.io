<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->

    

    
        <meta name="description" content="当想匹配比如手机号、邮箱等特殊形式的字符串时，大家往往都会想到正则表达式，不过当脑海中浮现出那一串神奇的既没有注释，甚至没有空格的字符串时，内心又会充满恐惧。此时你可能会动用搜索引擎，搜到别人写的那一串神奇字符，拷贝到自己的代码中，稍经测试，发现竟然能用，不禁发出一阵牛逼，然后就去写别的代码逻辑去了">
    

    <!--Author-->
    
        <meta name="author" content="酷家乐移动前端团队">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="正则表达式包会教程">
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="当想匹配比如手机号、邮箱等特殊形式的字符串时，大家往往都会想到正则表达式，不过当脑海中浮现出那一串神奇的既没有注释，甚至没有空格的字符串时，内心又会充满恐惧。此时你可能会动用搜索引擎，搜到别人写的那一串神奇字符，拷贝到自己的代码中，稍经测试，发现竟然能用，不禁发出一阵牛逼，然后就去写别的代码逻辑去了">
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="移动前端团队博客">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://yoursite.comhttp://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg">
    

        <meta name="twitter:card" content="summary_large_image">

    

    
        <meta name="twitter:image" content="http://yoursite.comhttp://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg">
    

    <!-- Title -->
    
    <title>正则表达式包会教程 - 移动前端团队博客</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="https://avatars0.githubusercontent.com/u/40188012?s=200&v=4">
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">酷家乐</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                首页
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                文章目录
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/about">
                            
                                关于我们
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/Kujiale-Mobile">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->


<header>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading" style="margin-top: 10rem">
                    <h1>
                        正则表达式包会教程
                    </h1>

                    <span style="color: #9EABB3; font-size: 1.5rem;">
                        <!-- Date and Author -->
                        
                        冬青
                         | 
                        
                        2019-06-18
                        
                    </span>
                    <span style="color: #9EABB3; font-size: 1.5rem;"> | 浏览量：<span id="busuanzi_value_page_pv"></span>次</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
            
            <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                
                


<a href="/tags/JavaScript/">#JavaScript</a> <a href="/tags/正则/">#正则</a>


                
            </div>
            <div class="col-lg-4 col-md-5 post-categories">
                
                

<a href="/categories/JavaScript/">JavaScript</a>

                
            </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>当想匹配比如手机号、邮箱等特殊形式的字符串时，大家往往都会想到正则表达式，不过当脑海中浮现出那一串神奇的既没有注释，甚至没有空格的字符串时，内心又会充满恐惧。此时你可能会动用搜索引擎，搜到别人写的那一串神奇字符，拷贝到自己的代码中，稍经测试，发现竟然能用，不禁发出一阵牛逼，然后就去写别的代码逻辑去了。再也不想看这一串字符。</p>
<p>是不是你也有过上述经历呢，对正则表达式怀有很大的畏惧之情，觉得自己无法驾驭它，但有时候又实在离不开它。下面我会简单介绍下正则表达式的由来，和驾驭它的正确姿势。本篇会议 JS 端的正则表达式为例子来演示。</p>
<h3 id="由来"><a href="#由来" class="headerlink" title="由来"></a>由来</h3><p>正则表达式诞生于 1951 年，它起源于对形式语言的数学研究。1968 年开始，正则表达式广泛应用于编辑器的字符匹配，和编译器中的词法分析。Ken Tompson 实现了第一个切实可用的匹配器，后来被用在了 Unix 的 grep 搜索工具中，g/re/p 全称 Global search for Regular Expression and Print matching lines。真正诞生更现代化的正则表达式实现是在 19 世纪 80 年代的 Perl 语言中。现在正则表达式已被各种语言广泛支持，比如 Java、Python、JavaScript 等。</p>
<p>由于正则表达式趋向于极致的简洁，甚至不惜容忍含义模糊，而且它不支持注释和空白，所有部分都紧密排列在一起，导致我们难以理解也属正常，但尽管有这些缺点，正则表达式依然被广泛的应用着。</p>
<h3 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h3><p>我们要提取一个 http 链接的 scheme 和 domain，那正则表达式如何写呢？我们可以简化成如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let parse_url = /^(https?):\/&#123;0,3&#125;([0-9.\-A-Za-z]+)(?::\d+)?.*$/</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parse_url.exec(&apos;http://www.kujiale.com:80/college&apos;)</span><br><span class="line">会得到一个数组，[&quot;http://www.kujiale.com:80/college&quot;, &quot;http&quot;, &quot;www.kujiale.com&quot;]</span><br><span class="line">数组的首位是整个输入，第二位和第三位则为我们想要的内容。</span><br></pre></td></tr></table></figure>
<p>下面我们一步步来分析该正则表达式</p>
<p><code>^</code> <code>$</code> 表示匹配开始和结尾，它是一个锚，只有开头和结尾处满足该正则的字符串才匹配，而如果没有该锚，意味着，如果字符串中间部分满足该正则也会被匹配到。</p>
<p>比如当我们不用 <code>^</code> 符号时，同样执行上述代码，如果此时来匹配 <code>xhttp://www.kujiale.com:80/college</code> 则一样会成功匹配，而使用了 <code>^</code> 则会匹配失败。</p>
<p>注：<code>^</code> 既可以表示开始的锚，也可以用作语意<code>非</code>。后面会详述。</p>
<h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><p>上面例子中得到的结果为数组，包含了三部分内容，而无其他。在正则中，如果我们想获取其中的部分内容，我们就会使用一对括号来保住所要提取的部分，我们把这部分称为一个分组 (…)， 一个分组会复制它所匹配的文本，并将其放到 result 数组里，每个分组会被指定一个编号，1，2，3… 。如果分组有嵌套，则会从按从左到右，从外到里的方式输出。如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/((ht)(tp))(s)/.exec(&apos;https&apos;)</span><br><span class="line">输出：[&quot;https&quot;, &quot;http&quot;, &quot;ht&quot;, &quot;tp&quot;, &quot;s&quot;]</span><br></pre></td></tr></table></figure>
<p>当我们不想捕获某个分组时，我们需要在分组中加上 <code>?:</code> 表示不要捕获该分组，就像最初的例子中不要捕获端口号那样使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/((ht)(?:tp))(s)/.exec(&apos;https&apos;)</span><br><span class="line">输出：[&quot;https&quot;, &quot;http&quot;, &quot;ht&quot;, &quot;s&quot;]</span><br></pre></td></tr></table></figure>
<p>分组被捕获后，我们可以使用 <code>\</code> + 编号来使用该分组。\1 表示分组一，\2 表示分组二，以此类推。比如我们要找一个文本中搜索一对重复的单词</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const reg = /([A-Za-z]+)\s+\1/</span><br><span class="line">reg.test(&apos;aaa bbb&apos;)  false</span><br><span class="line">reg.test(&apos;aaa aaa&apos;)  true</span><br></pre></td></tr></table></figure>
<h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h3><p>正则匹配最终匹配的还是字符，所以我们需要表达字符的方式。如果只是匹配一个字符，那很简单，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/a/.test(&apos;a&apos;)  true</span><br></pre></td></tr></table></figure>
<p>我们也可以加上 <code>或</code> 逻辑 <code>|</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/a|b/.test(&apos;b&apos;) true</span><br><span class="line">/a|b/.test(&apos;a&apos;) true</span><br></pre></td></tr></table></figure>
<p>如果是一类字符，如果一直用 <code>或</code> 逻辑那也太繁琐了，此时我们可以使用 <code>[]</code> ，比如匹配所有 a 到 z 的字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/[a-z]/.test(&apos;b&apos;) true</span><br><span class="line">/[ab]/.test(&apos;b&apos;) true</span><br></pre></td></tr></table></figure>
<p>如果想加上 <code>非</code> 的语义，就像我们上面所说，那我们就需要在字符集中加上 <code>^</code> 符号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[^ab]/.test(&apos;b&apos;) false</span><br></pre></td></tr></table></figure>
<p>由于某些字符集经常用到，所以正则帮我们提取了出了这些常用的字符集，用一些特殊符号来表示</p>
<p><code>.</code> 匹配除 <code>\n \r</code> 之外的任何单个字符</p>
<p><code>\d</code> 等价于 <code>[0-9]</code></p>
<p><code>\D</code> 等价于 <code>[^0-9]</code></p>
<p><code>\w</code> 等价于<code>[0-9A-Z_a-z]</code></p>
<p><code>\W</code> 等价于<code>[^0-9A-Z_a-z]</code></p>
<p><code>\s</code> 匹配任何不可见字符, 比如空格换行等</p>
<p><code>\S</code> 匹配任何可见字符</p>
<p><strong>注：当字符集中使用到一些保留字符时，需要使用 <code>\</code> 进行转意</strong></p>
<h3 id="匹配次数"><a href="#匹配次数" class="headerlink" title="匹配次数"></a>匹配次数</h3><p>我们除了匹配字符，还得需要定义匹配字符的数量，比如我们要匹配两个字母的单词，不是写成  <code>/\w\w/</code> 而是可以写成 <code>/\w{2}/</code></p>
<p>字符或字符集后面跟 {n, m} 表示该字符或字符集可重复的次数范围，一样，正则为我们封装了一些常用的次数匹配规则，比如 +, *, ? ，如下表所示。</p>
<p><code>{n,}</code> 大于等于 n 次</p>
<p><code>{n}</code> 等于 n 次</p>
<p><code>+</code> 等价于 <code>{1,}</code> </p>
<p><code>*</code> 等价于 <code>{0,}</code></p>
<p><code>?</code> 等价于 <code>{0,1}</code></p>
<h3 id="标识"><a href="#标识" class="headerlink" title="标识"></a>标识</h3><p>除了上述说的这些，你还可能看到过有些正则表达式后面加了 <code>/g</code> 或 <code>/i</code> 或 <code>/m</code>。 比较常用的是 <code>/g</code>，<code>/i</code> 表示忽略字符大小写，<code>/m</code> 表示多行匹配，都不怎么常用。</p>
<p>其中 <code>/g</code> 的使用也有限制，比如 <code>test</code>、<code>search</code>、和 RegExp 的 <code>exec</code> 方法会忽略掉 <code>/g</code> 标识。<code>/g</code> 可以用在 string.match 和 string.replace 方法中， 如下例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;[22].[44].[33].&quot;.match(/\d+/g)  // 输出 [&quot;22&quot;, &quot;44&quot;, &quot;33&quot;]</span><br><span class="line">&quot;[22].[44].[33].&quot;.match(/\d+/)   // 输出 [&quot;22&quot;]</span><br><span class="line"> </span><br><span class="line">&quot;aaaa&quot;.replace(/a/, &apos;b&apos;)   // 输出 &quot;baaa&quot;</span><br><span class="line">&quot;aaaa&quot;.replace(/a/g, &apos;b&apos;)  // 输出 &quot;bbbb&quot;</span><br></pre></td></tr></table></figure>
<h3 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h3><p>我们再回过头来看下这个正则，是不是也觉得不难了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^(https?):\/&#123;0,3&#125;([0-9.\-A-Za-z]+)(?::\d+)?.*$/</span><br></pre></td></tr></table></figure>
<p>(https?) 表示捕获该部分，s 可有可无。\/{0, 3}，表示匹配 <code>/</code>，0 到 3 个都满足。后面就是匹配 域名、端口和后面的 path、query 部分。另外以上例子部分使用 javascript 语言，java 的正则表达式和 js 本质没有区别，但要特别注意 Java 中的转译需要用两个斜杆 <code>\\</code> 。</p>


                
            </div>

            <!-- Comments -->
            
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h3>评论，需翻墙</h3>
<script src="https://utteranc.es/client.js" repo="Kujiale-Mobile/Blog" issue-term="title" theme="github-light" crossorigin="anonymous" async>
</script>
            </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/Kujiale-Mobile" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2020 酷家乐移动前端团队<br></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'kujiale-mobile';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>